@model MyTestApplication.Models.CountryAndStateVM
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

@if (ViewBag.CountryList != null)
{

    @Html.DropDownListFor(m => m.CountryId, ViewBag.CountryList as SelectList, "-----Select Country----", new { @class = "form-control" })
}

@Html.DropDownListFor(m => m.StateId, new SelectList(" "), "-----Select State----", new { @class = "form-control" })

<input type="text" class="form-control" id="textAutoComplete" />


@*<input type="file" id="fileinput" />
    <input type='button' id='btnLoad' value='Load' onclick='handleFileSelect();' />
    <div id="editor"></div>*@



@(Html.DevExtreme().DataGrid()
                                            .ID("gridContainer")
                                            .DataSource(new JS("customers"))
                                            .ShowBorders(true)
                                            .Columns(c =>
                                            {
                                                c.Add().DataField("CompanyName");
                                                c.Add().DataField("City");
                                                c.Add().DataField("State");
                                                c.Add().DataField("Phone");
                                                c.Add().DataField("Fax");
                                            })
                                            .Paging(paging => paging.PageSize(4))
                                            .Sorting(sorting => sorting.Mode(GridSortingMode.Multiple))
                                            .AllowColumnReordering(true)
                                            .AllowColumnResizing(true)
                                            .FilterRow(filterrow => filterrow.Visible(true))
                                            .Selection(s => s.Mode(SelectionMode.Multiple))
                                            .GroupPanel(gp => gp.Visible(true))
                                            .Editing(editing =>
                                            {
                                                editing.AllowAdding(true);
                                                editing.AllowDeleting(true);
                                                editing.AllowUpdating(true);
                                            })
)
<script>
    var customers = [{
        "ID": 1,
        "CompanyName": "Super Mart of the West",
        "Address": "702 SW 8th Street",
        "City": "Bentonville",
        "State": "Arkansas",
        "Zipcode": 72716,
        "Phone": "(800) 555-2797",
        "Fax": "(800) 555-2171",
        "Website": "http://www.nowebsitesupermart.com"
    }, {
        "ID": 2,
        "CompanyName": "Electronics Depot",
        "Address": "2455 Paces Ferry Road NW",
        "City": "Atlanta",
        "State": "Georgia",
        "Zipcode": 30339,
        "Phone": "(800) 595-3232",
        "Fax": "(800) 595-3231",
        "Website": "http://www.nowebsitedepot.com"
    }, {
        "ID": 3,
        "CompanyName": "K&S Music",
        "Address": "1000 Nicllet Mall",
        "City": "Minneapolis",
        "State": "Minnesota",
        "Zipcode": 55403,
        "Phone": "(612) 304-6073",
        "Fax": "(612) 304-6074",
        "Website": "http://www.nowebsitemusic.com"
    }, {
        "ID": 4,
        "CompanyName": "Tom's Club",
        "Address": "999 Lake Drive",
        "City": "Issaquah",
        "State": "Washington",
        "Zipcode": 98027,
        "Phone": "(800) 955-2292",
        "Fax": "(800) 955-2293",
        "Website": "http://www.nowebsitetomsclub.com"
    }, {
        "ID": 5,
        "CompanyName": "E-Mart",
        "Address": "3333 Beverly Rd",
        "City": "Hoffman Estates",
        "State": "Illinois",
        "Zipcode": 60179,
        "Phone": "(847) 286-2500",
        "Fax": "(847) 286-2501",
        "Website": "http://www.nowebsiteemart.com"
    }, {
        "ID": 6,
        "CompanyName": "Walters",
        "Address": "200 Wilmot Rd",
        "City": "Deerfield",
        "State": "Illinois",
        "Zipcode": 60015,
        "Phone": "(847) 940-2500",
        "Fax": "(847) 940-2501",
        "Website": "http://www.nowebsitewalters.com"
    }, {
        "ID": 7,
        "CompanyName": "StereoShack",
        "Address": "400 Commerce S",
        "City": "Fort Worth",
        "State": "Texas",
        "Zipcode": 76102,
        "Phone": "(817) 820-0741",
        "Fax": "(817) 820-0742",
        "Website": "http://www.nowebsiteshack.com"
    }, {
        "ID": 8,
        "CompanyName": "Circuit Town",
        "Address": "2200 Kensington Court",
        "City": "Oak Brook",
        "State": "Illinois",
        "Zipcode": 60523,
        "Phone": "(800) 955-2929",
        "Fax": "(800) 955-9392",
        "Website": "http://www.nowebsitecircuittown.com"
    }, {
        "ID": 9,
        "CompanyName": "Premier Buy",
        "Address": "7601 Penn Avenue South",
        "City": "Richfield",
        "State": "Minnesota",
        "Zipcode": 55423,
        "Phone": "(612) 291-1000",
        "Fax": "(612) 291-2001",
        "Website": "http://www.nowebsitepremierbuy.com"
    }, {
        "ID": 10,
        "CompanyName": "ElectrixMax",
        "Address": "263 Shuman Blvd",
        "City": "Naperville",
        "State": "Illinois",
        "Zipcode": 60563,
        "Phone": "(630) 438-7800",
        "Fax": "(630) 438-7801",
        "Website": "http://www.nowebsiteelectrixmax.com"
    }, {
        "ID": 11,
        "CompanyName": "Video Emporium",
        "Address": "1201 Elm Street",
        "City": "Dallas",
        "State": "Texas",
        "Zipcode": 75270,
        "Phone": "(214) 854-3000",
        "Fax": "(214) 854-3001",
        "Website": "http://www.nowebsitevideoemporium.com"
    }, {
        "ID": 12,
        "CompanyName": "Screen Shop",
        "Address": "1000 Lowes Blvd",
        "City": "Mooresville",
        "State": "North Carolina",
        "Zipcode": 28117,
        "Phone": "(800) 445-6937",
        "Fax": "(800) 445-6938",
        "Website": "http://www.nowebsitescreenshop.com"
    }];
</script>

<div class="row">

    <div class="col-md-12">

        <div id="divAccountTabs"></div>
        <div class="card table-card">
            <div class="card-block p-b-0" style="overflow-x:auto;">
                <div id="divClientAccounts"></div>


            </div>
        </div>
    </div>

</div>

<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<link href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" rel="Stylesheet" />

<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script>


    $(document).ready(function () {

        $("#CountryId").change(function () {
            var countryId = $(this).val();

            $.ajax({
                type: 'POST',
                url: '/Test/GetStateList?CountryId=' + countryId,
                contentType: 'html',
                success: function (response) {
                    $("#StateId").empty();
                    $("#StateId").append(response);

                },
                error: function (ex) {

                }
            });
        })
    });


    //var autoCompleteArray = ["Reshu", "Sumit", "Ayushi", "Nikhil", "Asmita", "Khushi"];
    //$("#textAutoComplete").autocomplete({

    //    source: autoCompleteArray
    //});


    $("#textAutoComplete").autocomplete({

        source: function (request, response) {

            $.ajax({
                type: 'Get',
                url: '/Test/GetSuggestion',
                data: { text: request.term },

                success: function (data) {
                    response($.map(data, function (item) {
                        return { label: item, value: item }
                    }))
                }
            })
        }
    });
    function handleFileSelect() {
        if (!window.File || !window.FileReader || !window.FileList || !window.Blob) {
            alert('The File APIs are not fully supported in this browser.');
            return;
        }

        var input = document.getElementById('fileinput');
        if (!input) {
            alert("Um, couldn't find the fileinput element.");
        }
        else if (!input.files) {
            alert("This browser doesn't seem to support the `files` property of file inputs.");
        }
        else if (!input.files[0]) {
            alert("Please select a file before clicking 'Load'");
        }
        else {
            var file = input.files[0];
            var fr = new FileReader();
            fr.onload = receivedText;
            //fr.readAsText(file);
            //fr.readAsBinaryString(file); //as bit work with base64 for example upload to server
            fr.readAsDataURL(file);
        }
    }

    function receivedText() {
        document.getElementById('editor').appendChild(document.createTextNode(fr.result));
    }
</script>

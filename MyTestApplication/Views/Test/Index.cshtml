@model MyTestApplication.Models.CountryAndStateVM
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

@if (ViewBag.CountryList != null)
{

    @Html.DropDownListFor(m => m.CountryId, ViewBag.CountryList as SelectList, "-----Select Country----", new { @class = "form-control" })
}

@Html.DropDownListFor(m => m.StateId, new SelectList(" "), "-----Select State----", new { @class = "form-control" })

<input type="text" class="form-control" id="textAutoComplete" />
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
<link href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" rel="Stylesheet"></link>

<script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
<script>


    $(document).ready(function () {

        $("#CountryId").change(function () {
            var countryId = $(this).val();

            $.ajax({
                type: 'POST',
                url: '/Test/GetStateList?CountryId=' + countryId,
                contentType: 'html',
                success: function (response) {
                    $("#StateId").empty();
                    $("#StateId").append(response);

                },
                error: function (ex) {

                }
            });
        })
    });


    //var autoCompleteArray = ["Reshu", "Sumit", "Ayushi", "Nikhil", "Asmita", "Khushi"];
    //$("#textAutoComplete").autocomplete({

    //    source: autoCompleteArray
    //});


    $("#textAutoComplete").autocomplete({

        source: function (request, response) {
          
            $.ajax({
                type: 'Get',
                url: '/Test/GetSuggestion',
                data: { text: request.term },
               
                success: function (data) {
                    response($.map(data, function (item) {
                        return { label: item, value: item }
                    }))
                }
            })
        }
    });

</script>